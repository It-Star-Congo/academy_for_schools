<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Professeurs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#f7f8fb;
      --card:#ffffff;
      --text:#1a2841;
      --muted:#6b7a90;
      --brand:#2f74ff;
      --brand-2:#6aa1ff;
      --ring:#e7ecf5;
      --success:#16a34a;
    }
    *{box-sizing:border-box}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }
    .container{ max-width:1100px; margin:0 auto; padding:24px 16px 48px; }

    /* Header / toolbar */
    .toolbar{
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      margin: 8px 0 20px;
    }
    .title{
      display:flex; align-items:center; gap:12px;
      font-size: clamp(20px, 3vw, 28px); font-weight: 800; letter-spacing:.2px;
    }
    .title .count{
      color:#fff; background: linear-gradient(90deg, var(--brand), var(--brand-2));
      padding:4px 10px; border-radius:999px; font-size:12px; font-weight:700;
    }
    .btn{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px; border-radius:12px; border:1px solid var(--ring);
      background:#fff; font-weight:700; color:var(--text); cursor:pointer;
      text-decoration:none; transition:.2s ease; box-shadow:0 6px 24px rgba(28,44,79,.05);
    }
    .btn:hover{ transform: translateY(-1px); box-shadow:0 10px 30px rgba(28,44,79,.08); }
    .btn-primary{
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
      border: none; color:#fff;
    }

    /* Grid */
    .grid{
      display:grid; gap:16px;
      grid-template-columns: repeat(auto-fill, minmax(240px,1fr));
    }

    /* Card */
    .card{
      background:var(--card); border:1px solid var(--ring); border-radius:16px;
      padding:16px; box-shadow:0 8px 26px rgba(28,44,79,.06);
      transition:.2s; position:relative; overflow:hidden;
    }
    .card:after{
      content:""; position:absolute; inset:auto -40% -40% auto; width:200px; height:200px;
      background: radial-gradient(closest-side, rgba(47,116,255,.06), transparent 70%);
      transform: rotate(25deg);
    }
    .card:hover{ transform: translateY(-2px); box-shadow:0 14px 34px rgba(28,44,79,.10); }

    .header{
      display:flex; align-items:center; gap:14px; margin-bottom:8px;
    }
    .avatar{
      width:64px; height:64px; border-radius:50%; flex:0 0 auto; overflow:hidden;
      border:1px solid var(--ring); background:#eef3ff; display:grid; place-items:center;
      font-weight:800; color:#1c2c4f;
    }
    .avatar img{ width:100%; height:100%; object-fit:cover; display:block; }
    .name{
      font-size:18px; font-weight:800; line-height:1.2;
    }
    .username{
      color:var(--muted); font-size:14px;
    }

    .pill{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px; border-radius:999px; font-size:12px; font-weight:700;
      background:#f2f6ff; color:#2b59c3; border:1px solid #e5ecff;
    }

    /* Empty state */
    .empty{
      text-align:center; padding:60px 16px; color:var(--muted);
      border:2px dashed var(--ring); border-radius:16px; background:#fff;
    }
    .empty h2{ margin:0 0 8px; font-weight:800; color:var(--text); }
    .empty p{ margin:0 0 16px; }
    .empty .btn-primary{ margin-top:6px; }

    /* Responsive spacing */
    @media (max-width:520px){
      .header { gap:12px; }
      .avatar{ width:56px; height:56px; }
    }
  </style>
</head>
<body>
  <div class="container">

    <% const count = (teachers && teachers.length) || 0; %>
    <div class="toolbar">
      <div class="title">
        üë©‚Äçüè´ Professeurs
        <span class="count"><%= count %></span>
      </div>
      <a href="/admin/teachers/new" class="btn btn-primary">‚ûï Ajouter un professeur</a>
    </div>

    <% if (!count) { %>
      <div class="empty">
        <h2>Aucun professeur pour le moment</h2>
        <p>Ajoutez votre premier professeur pour commencer √† organiser vos classes.</p>
        <a href="/admin/teachers/new" class="btn btn-primary">‚ûï Ajouter un professeur</a>
      </div>
    <% } else { %>
      <div class="grid">
        <% teachers.forEach(t => { 
             const fullName = [t.firstname, t.name].filter(Boolean).join(' ') || t.username;
             const initials = ((t.firstname ? t.firstname[0] : '') + (t.name ? t.name[0] : (t.username ? t.username[0] : '')))
                              .toUpperCase();
        %>
          <article class="card">
            <div class="header">
              <div class="avatar">
                <% if (t.profile) { %>
                  <img src="<%= t.profile %>" alt="Photo de <%= fullName %>" onerror="this.parentNode.textContent='<%= initials %>'" />
                <% } else { %>
                  <span aria-hidden="true"><%= initials || 'PR' %></span>
                <% } %>
              </div>
              <div>
                <div class="name"><%= fullName %></div>
                <div class="username">@<%= t.username %></div>
              </div>
            </div>

            <div>
              <span class="pill" title="R√¥le">Professeur</span>
            </div>
          </article>
        <% }) %>
      </div>
    <% } %>

  </div>
</body>
</html>
