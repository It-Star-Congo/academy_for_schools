
    <style>
    :root {
      --primary-color:   <%= theme.primaryColor %>;
      --secondary-color: <%= theme.secondaryColor %>;
      --font-family:     '<%= theme.fontFamily %>';
    }
    /* admin-edit-school.css */

    /* Variables du thème déjà définies via inline <style> */

    body {
    background-color: #f5f7fa;
    font-family: var(--font-family);
    color: #333;
    line-height: 1.6;
    margin: 0;
    padding: 0;
    }

    header h1 {
    text-align: center;
    font-size: 2rem;
    color: var(--primary-color);
    margin: 40px 0 20px;
    }

    main {
    max-width: 720px;
    margin: auto;
    padding: 0 20px 40px;
    }

    main form {
    background-color: #ffffff;
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.05);
    }

    main form .alert-error {
    background: #fdecea;
    color: #e33e3e;
    border-left: 4px solid #f5c6cb;
    padding: 12px;
    margin-bottom: 20px;
    border-radius: 4px;
    }

    main form div {
    margin-bottom: 20px;
    }

    main form label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #444;
    }

    main form input[type="text"],
    main form input[type="email"],
    main form input[type="date"],
    main form input[type="color"],
    main form input[type="password"],
    main form select,
    main form input[type="file"] {
    width: 100%;
    padding: 10px 15px;
    border: 1px solid #ccc;
    border-radius: 6px;
    background: #f9f9f9;
    transition: border-color 0.3s ease, background-color 0.3s ease;
    font-size: 1rem;
    }

    main form input:focus,
    main form select:focus {
    outline: none;
    border-color: var(--primary-color);
    background-color: #ffffff;
    }

    main form img {
    display: block;
    max-height: 80px;
    margin-bottom: 15px;
    border-radius: 6px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    main form .form-actions {
    text-align: center;
    margin-top: 30px;
    }

    main form button[type="submit"] {
    background-color: var(--primary-color);
    color: #ffffff;
    padding: 12px 0;
    width: 100%;
    border: none;
    border-radius: 6px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s ease;
    }

    main form button[type="submit"]:hover {
    background-color: var(--secondary-color);
    }

    .color1, .color2 {
        min-height: 2.5em;
        width: 2.5em;
        padding: 0;
        border: none;
        cursor: pointer;
    }

  </style>
  <header>
    <h1>⚙️ Paramètres de l’école</h1>
  </header>

  <main>
    <% if (typeof error !== 'undefined') { %>
      <div class="alert alert-error"><%= error %></div>
    <% } %>

    <form action="/admin/school" method="POST" enctype="multipart/form-data">
      <div>
        <label for="name">Nom de l’école *</label>
        <input type="text" id="name" name="name" value="<%= school.name %>" required>
      </div>

      <div>
        <label for="primaryColor">Couleur principale</label>
        <input class = "color1" type="color" id="primaryColor" name="primaryColor" value="<%= school.primaryColor || '#0055a4' %>">
      </div>

      <div>
        <label for="secondaryColor">Couleur secondaire</label>
        <input class = "color2" type="color" id="secondaryColor" name="secondaryColor" value="<%= school.secondaryColor || '#ffc600' %>">
      </div>

      <!-- Ajoute ça DANS ton <form> (par ex. juste avant le bouton Enregistrer) -->
      <div>
        <label class="block font-semibold">Police du site</label>

        <!-- Sélecteur de police -->
        <select id="fontFamily" name="fontFamily" class="w-full border p-2 rounded">
          <!-- Système / web-safe -->
          <option value="system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif"
            <%= (school && school.fontFamily?.startsWith('system-ui')) ? 'selected' : '' %>>
            Système (recommandé)
          </option>
          <option value="Arial, Helvetica, sans-serif" <%= school?.fontFamily==='Arial, Helvetica, sans-serif' ? 'selected' : '' %>>
            Arial
          </option>
          <option value="'Times New Roman', Times, serif" <%= school?.fontFamily==="'Times New Roman', Times, serif" ? 'selected' : '' %>>
            Times New Roman
          </option>
          <option value="Georgia, serif" <%= school?.fontFamily==='Georgia, serif' ? 'selected' : '' %>>
            Georgia
          </option>
          <option value="'Courier New', Courier, monospace" <%= school?.fontFamily==="'Courier New', Courier, monospace" ? 'selected' : '' %>>
            Courier New
          </option>

          <!-- Google Fonts (chargées dynamiquement) -->
          <option value="Inter" <%= school?.fontFamily==='Inter' ? 'selected' : '' %>>Inter</option>
          <option value="Roboto" <%= school?.fontFamily==='Roboto' ? 'selected' : '' %>>Roboto</option>
          <option value="Poppins" <%= school?.fontFamily==='Poppins' ? 'selected' : '' %>>Poppins</option>
          <option value="Montserrat" <%= school?.fontFamily==='Montserrat' ? 'selected' : '' %>>Montserrat</option>
          <option value="Lora" <%= school?.fontFamily==='Lora' ? 'selected' : '' %>>Lora</option>
          <option value="Merriweather" <%= school?.fontFamily==='Merriweather' ? 'selected' : '' %>>Merriweather</option>
          <option value="'Source Sans 3'" <%= school?.fontFamily==="'Source Sans 3'" ? 'selected' : '' %>>Source Sans 3</option>
        </select>

        <!-- Prévisualisation -->
        <div id="fontPreview" class="mt-3 p-3 border rounded">
          <div class="text-sm text-gray-500 mb-1">Aperçu</div>
          <div id="fontPreviewText" style="font-size: 20px; line-height:1.5;">
            My School — Aa Bb Cc 0123<br>
            “L’éducation est l’arme la plus puissante…”
          </div>
        </div>
      </div>

      <div>
        <label for="contactEmail">Email de contact</label>
        <input type="email" id="contactEmail" name="contactEmail" value="<%= school.contactEmail || '' %>">
      </div>

      <div>
        <label for="contactPhone">Téléphone de contact</label>
        <input type="text" id="contactPhone" name="contactPhone" value="<%= school.contactPhone || '' %>">
      </div>

      <div>
        <label for="contactAddress">Adresse de contact</label>
        <input type="text" id="contactAddress" name="contactAddress" value="<%= school.contactAddress || '' %>">
      </div>

      <div>
        <label for="slug">Modification du slug (Optionnel)</label>
        <input type="text" id="slug" name="slug" value="<%= school.slug || '' %>">.it-star-academy.com
      </div>
      <div>
        <label for="domain">Modification du nom de domaine (Optionnel, voir <a href="https://www.youtube.com/watch?v=fQhWa8ARHwQ">ici</a> comment faire pointer son DN)</label>
        <input type="text" id="domain" name="domain" value="<%= school.domain || '' %>">
      </div>

      <div>
        <% if (school.logo) { %>
          <p>Logo actuel :</p>
          <img src="<%= school.logo %>" alt="Logo" style="max-height:80px">
        <% } %>
        <label for="logo">Modifier le logo</label>
        <input type="file" id="logo" name="logo" accept="image/*">
      </div>

      <button type="submit" class="btn-primary">Enregistrer</button>
    </form>
  </main>

  <!-- Place ce <script> APRÈS ton formulaire (fin de page) -->
<script>
  // Mapping des Google Fonts -> URL CSS (poids courants 400/600)
  const GOOGLE_FONTS = {
    'Inter': 'https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap',
    'Roboto': 'https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap',
    'Poppins': 'https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap',
    'Montserrat': 'https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap',
    'Lora': 'https://fonts.googleapis.com/css2?family=Lora:wght@400;600&display=swap',
    'Merriweather': 'https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&display=swap',
    'Source Sans 3': 'https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600&display=swap'
  };

  const sel = document.getElementById('fontFamily');
  const previewText = document.getElementById('fontPreviewText');

  // Injecte/remplace dynamiquement la balise <link> de Google Fonts si nécessaire
  function ensureGoogleFontLoaded(fontName) {
    // supprime ancien link si présent
    let old = document.getElementById('google-font-dynamic');
    if (old) old.remove();

    const href = GOOGLE_FONTS[fontName];
    if (!href) return; // rien à charger pour les web-safe

    const link = document.createElement('link');
    link.id = 'google-font-dynamic';
    link.rel = 'stylesheet';
    link.href = href;
    document.head.appendChild(link);
  }

  // Applique la police au bloc d’aperçu
  function applyPreview(value) {
    // value peut être un nom court (Google) OU une stack complète (web-safe)
    if (GOOGLE_FONTS[value]) {
      ensureGoogleFontLoaded(value);
      previewText.style.fontFamily = `'${value}', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif`;
    } else {
      ensureGoogleFontLoaded(null);
      previewText.style.fontFamily = value;
    }
  }

  // Au changement de sélection
  sel.addEventListener('change', () => {
    applyPreview(sel.value);
  });

  // Initialisation (prend la valeur du select au chargement)
  document.addEventListener('DOMContentLoaded', () => {
    applyPreview(sel.value);
  });
</script>



